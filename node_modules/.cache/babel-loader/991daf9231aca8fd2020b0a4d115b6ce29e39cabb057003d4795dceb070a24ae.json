{"ast":null,"code":"import { resolveComponent as _resolveComponent, vShow as _vShow, createVNode as _createVNode, withDirectives as _withDirectives, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"my-2\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AssetForm = _resolveComponent(\"AssetForm\");\n  const _component_AssetList = _resolveComponent(\"AssetList\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_withDirectives(_createVNode(_component_AssetForm, {\n    onActionAdd: $options.addAsset\n  }, null, 8 /* PROPS */, [\"onActionAdd\"]), [[_vShow, $props.showAdd]]), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_AssetList, {\n    assets: $data.assets,\n    onActionDelete: $options.deleteAsset,\n    onActionBroken: $options.brokenAsset\n  }, null, 8 /* PROPS */, [\"assets\", \"onActionDelete\", \"onActionBroken\"])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createVNode","_component_AssetForm","onActionAdd","$options","addAsset","$props","showAdd","_createElementVNode","_hoisted_1","_component_AssetList","assets","$data","onActionDelete","deleteAsset","onActionBroken","brokenAsset"],"sources":["/Users/agusmanriyadi/Documents/LATIHAN/VUE 3/vuepractice/src/views/Home.vue"],"sourcesContent":["<template>\n    \n    <AssetForm v-show=\"showAdd\" @action-add=\"addAsset\"/>\n\n    <div class=\"my-2\">\n        <AssetList :assets=\"assets\" @action-delete=\"deleteAsset\" @action-broken=\"brokenAsset\"/>\n    </div>\n\n</template>\n\n<script>\nimport AssetForm from '../components/modules/form/AssetForm.vue'\nimport AssetList from '../components/modules/list/asset/AssetList.vue'\nimport {UseAssetStore} from '../store/assets'\n\nexport default {\n    name: \"Home\",\n    props:{\n        showAdd: Boolean\n    },\n    components: {\n        AssetForm,\n        AssetList,\n        UseAssetStore\n    },\n    data(){\n        return {\n            assets : [],\n            store : UseAssetStore()\n        }\n    },\n    methods:{\n        async deleteAsset(id){\n            return await this.assets.filter((assets) => assets.id !== id)\n        },\n        async addAsset(newAsset){\n            this.assets = [...this.assets, newAsset]\n        },\n        async brokenAsset(id){\n\n            const filterBroken = await this.fetchAsset(id)\n\n            //console.log(filterBroken)\n\n            const updBroken = {...filterBroken, broken: !filterBroken.broken}\n\n            const res = await axios({\n                methods: 'put',\n                data: updBroken\n            })\n\n            const data = res.data.json()\n\n            this.assets = await this.assets.map( (asset) => asset.id === id ? {...asset, broken : !data.broken} : asset)\n        },\n        async fetchAssets(){\n            await this.store.fetchAssets()\n            return this.store.getAssets \n        },\n        async fetchAsset(id){\n            const data = await this.store.fetchAsset(id)\n            console.log(data)\n            return data;\n        }\n    },\n    async created(){\n        this.assets = await this.fetchAssets()\n    }\n}\n</script>\n\n<style>\n\n</style>"],"mappings":";;EAISA,KAAK,EAAC;AAAM;;;;6EAFjBC,YAAA,CAAoDC,oBAAA;IAAvBC,WAAU,EAAEC,QAAA,CAAAC;EAAQ,2C,SAA9BC,MAAA,CAAAC,OAAO,E,GAE1BC,mBAAA,CAEM,OAFNC,UAEM,GADFR,YAAA,CAAuFS,oBAAA;IAA3EC,MAAM,EAAEC,KAAA,CAAAD,MAAM;IAAGE,cAAa,EAAET,QAAA,CAAAU,WAAW;IAAGC,cAAa,EAAEX,QAAA,CAAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}