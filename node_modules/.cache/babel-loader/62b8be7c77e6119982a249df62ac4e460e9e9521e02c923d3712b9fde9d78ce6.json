{"ast":null,"code":"import { resolveComponent as _resolveComponent, vShow as _vShow, createVNode as _createVNode, withDirectives as _withDirectives, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"my-2\"\n};\nexport function render(_ctx, _cache) {\n  const _component_AssetForm = _resolveComponent(\"AssetForm\");\n  const _component_AssetList = _resolveComponent(\"AssetList\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_withDirectives(_createVNode(_component_AssetForm, {\n    onActionAdd: _ctx.addAsset\n  }, null, 8 /* PROPS */, [\"onActionAdd\"]), [[_vShow, _ctx.showAdd]]), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_AssetList, {\n    assets: _ctx.assets,\n    onActionDelete: _ctx.deleteAsset,\n    onActionBroken: _ctx.brokenAsset\n  }, null, 8 /* PROPS */, [\"assets\", \"onActionDelete\", \"onActionBroken\"])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createVNode","_component_AssetForm","onActionAdd","_ctx","addAsset","showAdd","_createElementVNode","_hoisted_1","_component_AssetList","assets","onActionDelete","deleteAsset","onActionBroken","brokenAsset"],"sources":["/Users/agusmanriyadi/Documents/LATIHAN/VUE 3/vuepractice/src/views/Home.vue"],"sourcesContent":["<template>\n    \n    <AssetForm v-show=\"showAdd\" @action-add=\"addAsset\"/>\n\n    <div class=\"my-2\">\n        <AssetList :assets=\"assets\" @action-delete=\"deleteAsset\" @action-broken=\"brokenAsset\"/>\n    </div>\n\n</template>\n\n<script>\nimport AssetForm from '../components/modules/form/AssetForm.vue'\nimport AssetList from '../components/modules/list/asset/AssetList.vue'\nimport {UseAssetStore} from '../store/assets'\nimport axios from \"axios\"\n\nexport default {\n    name: \"Home\",\n    props:{\n        showAdd: Boolean\n    },\n    components: {\n        AssetForm,\n        AssetList,\n        UseAssetStore\n    },\n    data(){\n        return {\n            assets : [],\n            store : UseAssetStore()\n        }\n    },\n    methods:{\n        async deleteAsset(id){\n            if(confirm(\"Are you sure ?\")){\n                const res = await axios.delete(`api/assets/${id}`)\n                console.log(res)\n                await res.status === 200 ? this.assets.filter((asset) => asset.id !== id) : alert(\"Error deleting asset\")\n            }\n        },\n        async addAsset(newAsset){\n\n            const res = await axios.post(`api/assets`, newAsset)\n\n            if(res.status === 200){\n                alert(\"Data asset has been submit\")\n                await this.assets = [...this.assets, newAsset]\n            }\n\n        },\n        async brokenAsset(id){\n\n            const filterBroken = await this.fetchAsset(id)\n            const updBroken = {...filterBroken, broken: !filterBroken.broken}\n\n            const res = await axios.put(`api/assets/${id}`, updBroken)\n\n            const data = res.data\n\n            this.assets = await this.assets.map( (asset) => asset.id === id ? {...asset, broken : data.broken} : asset)\n        },\n        async fetchAssets(){\n            await this.store.fetchAssets()\n            return this.store.getAssets \n        },\n        async fetchAsset(id){\n            const data = await this.store.fetchAsset(id)\n            return await data\n        }\n    },\n    async created(){\n        this.assets = await this.fetchAssets()\n    }\n}\n</script>\n\n<style>\n\n</style>"],"mappings":";;EAISA,KAAK,EAAC;AAAM;;;;6EAFjBC,YAAA,CAAoDC,oBAAA;IAAvBC,WAAU,EAAEC,IAAA,CAAAC;EAAQ,2C,SAA9BD,IAAA,CAAAE,OAAO,E,GAE1BC,mBAAA,CAEM,OAFNC,UAEM,GADFP,YAAA,CAAuFQ,oBAAA;IAA3EC,MAAM,EAAEN,IAAA,CAAAM,MAAM;IAAGC,cAAa,EAAEP,IAAA,CAAAQ,WAAW;IAAGC,cAAa,EAAET,IAAA,CAAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}